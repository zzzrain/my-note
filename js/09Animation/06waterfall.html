<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>瀑布</title>
	<style>
		* {
		    padding: 0;
		    margin: 0;
		}

		html {
		    height: 100%;
		}

		body {
		    height: 100%;
		}

		img {
		    border: 0;
		}

		div.wrap {
		    width: 100%;
		    margin: 0 auto;
		    /*overflow: hidden;*/
		    position: relative;
		    background: #DDD;
		}

		div.wrap div {
		    width: 200px;
		    padding: 4px;
		    border: 1px solid #000;
		    float: left;
		    position: absolute;
		    left:0;top:0;
		    background:#fff;
		}

		div.wrap div h3 {
		    line-height: 35px;
		}

		div.wrap div img {
		    width: 200px;
		}
	</style>
    <script src="../common.js"></script>
	<script>
		/*
		1、计算列数、间隔
		2、用数组保存图片坐标
		3、排列图片（从top最小值开始排）
		4、更新数组top值
		5、图片加载完成后再获取
		6、适应窗口
		*/        
		document.addEventListener('DOMContentLoaded',()=>{
			let fall = document.querySelector('.wrap');
			let img =  fall.children;

			// 图片固定宽度
            let wide = img[0].offsetWidth;

			// 适应窗口
			auto();
			window.onresize = auto;
			function auto(){
				// 总长
				let len = fall.offsetWidth;				
				// 列数
				let col = parseInt(len/wide);	
				// 水平间距
				let wgap = parseInt(len%wide/(col+1));

				// 获取图片坐标
				let arr = [];
				for(let i=0;i<col;i++){
					arr.push({
						left:(i+1)*wgap+i*wide,
						top:10
					});
				}
				//console.log(arr)

				// 排列图片			
				for(let key of img){
					let load = key.querySelector('img');
					console.log(load.complete)										
					load.onload = function(){
						// 比较top值
						let idx = 0;
						let min = arr[0].top;
						for(let i in arr){
							if(arr[i].top<min){
								min = arr[i].top;
								idx = i;
							}
						}
						// key.style.left = arr[idx].left +'px';
						// key.style.top = arr[idx].top + 10 +'px';
						animate(key,{left:arr[idx].left,top:arr[idx].top + 10});

						// 更新top值
						arr[idx].top += key.offsetHeight + 10;
					}
					if(load.complete){
						load.onload();
					}
				}
			}	
		});
	</script>
</head>
<body>
	<div class="wrap" id="waterfall">
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/1.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/2.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/3.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/4.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/5.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/6.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/7.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/8.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/9.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/10.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/11.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/12.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/13.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/14.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/15.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/16.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/17.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/18.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/19.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/20.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/21.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/22.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/23.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/24.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/25.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/26.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/27.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/28.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/29.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/30.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/31.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/32.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/33.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/34.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/35.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/36.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/37.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/38.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/39.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/40.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/41.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/42.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/43.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/44.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/45.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/46.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/47.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/48.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/49.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/50.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/51.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/52.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/53.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/54.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/55.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/56.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/57.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="#" title=""><img src="waterfall/58.jpg" alt="" title="" /></a>
            <p>瀑布流瀑布流瀑布流瀑布流</p>
            <span>瀑布流瀑布流瀑布流</span>
        </div>
    </div>
</body>
</html>